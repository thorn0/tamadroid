"use strict";angular.module("tamadroidApp",["ngCookies","ngResource","ngSanitize","ngRoute","ui.bootstrap"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl"}).otherwise({redirectTo:"/"})}]),angular.module("tamadroidApp").controller("MainCtrl",["$scope","$interval","appMarket","$modal",function(a,b,c,d){function e(){f&&b.cancel(f),f=b(function(){a.rotate+=1,a.robot.battery=Math.max(0,a.robot.battery-1)},a.speed.interval*a.speed.acceleration)}a.speed={interval:2e3,acceleration:1};var f;a.$watch("speed",e,!0),a.openInstallModal=function(){d.open({templateUrl:"views/install.html",scope:a})},a.recharge=function(){a.robot.battery>=100||(a.robot.battery=Math.min(a.robot.battery+10,100),a.addXP())},a.install=function(b){b=angular.copy(b),g.installedApps.push(b),a.addXP()};var g=a.robot={name:"Tamadroid",battery:100,memory:70,mood:100,installedApps:[],level:1,xp:0},h={},i=chroma.scale(["gray","#a4c639"]).mode("lab").domain([0,100]);a.getColorByBattery=function(){var a=Math.floor(g.battery);return h[a]||(h[a]=i(g.battery).hex()),h[a]},a.appMarket=c,a.addXP=function(){var b=a.robot.xp,c=b+10;a.robot.xp=c,Math.floor(c/100)>Math.floor(b/100)&&(a.robot.level++,alert("Congratulations! You've got level up!\nYour new level is "+a.robot.level))}}]),angular.module("tamadroidApp").factory("appMarket",function(){function a(){new Date-c>1e4&&(c=new Date,angular.forEach(b,function(a){a.ver=(a.ver||1)+1}))}var b=[{name:"FooApp",ver:1,author:"Acme Corp."},{name:"BarApp",ver:2},{name:"Ingress",ver:10,batteryFactor:2}],c=new Date;return{getAvailableApps:function(){return a(),b}}}),angular.module("tamadroidApp").factory("appDb",function(){return[{name:"Google Play services",author:"Google"},{name:"Maps",author:"Google"},{name:"Gmail",author:"Google"},{name:"YouTube",author:"Google"},{name:"Facebook",author:"Facebook"},{name:"Angry Birds",author:"Rovio Mobile Ltd."},{name:"Skype",author:"Skype"},{name:"Twitter",author:"Twitter"},{name:"Adobe Reader",author:"Adobe Systems"},{name:"Google+",author:"Google"},{name:"Instagram",author:"Instagram"},{name:"Google Play Music",author:"Google"},{name:"Dropbox",author:"Dropbox, Inc."},{name:"Hangouts",author:"Google"},{name:"Foursquare",author:""},{name:"Ingress",author:"Niantic"},{name:"Fruit Ninja Free",author:"Halfbrick Studios"},{name:"Google Play Books",author:"Google"},{name:"Voice Search",author:"Google"},{name:"Chrome Browser - Google",author:"Google"},{name:"Google Translate",author:"Google"}]});